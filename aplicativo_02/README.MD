# Jogo da Forca com Flask e ZODB

Este projeto apresenta uma vers√£o web completa do cl√°ssico Jogo da Forca, constru√≠do com Python e o microframework Flask. Seu principal diferencial √© a utiliza√ß√£o do **ZODB (Zope Object Database)** para uma persist√™ncia de dados transparente e orientada a objetos, eliminando a necessidade de um banco de dados relacional tradicional ou de um ORM.

A aplica√ß√£o evoluiu de uma vers√£o inicial de terminal para uma interface web interativa e amig√°vel, demonstrando a flexibilidade de um modelo de dados bem desacoplado da camada de apresenta√ß√£o.

## ‚ú® Funcionalidades

  * **Interface Web Completa:** Uma aplica√ß√£o web responsiva e intuitiva constru√≠da com Flask e HTML/CSS puros.
  * **Jogabilidade Interativa:** Em vez de campos de texto, a interface utiliza bot√µes para cada letra do alfabeto, que s√£o desabilitados ap√≥s o uso para um feedback visual claro.
  * **Sele√ß√£o de Categoria com Um Clique:** Para iniciar um novo jogo, basta clicar no bot√£o da categoria desejada.
  * **Persist√™ncia de Sess√£o Robusta:** O estado do jogo √© salvo no ZODB ap√≥s cada jogada. O jogador pode fechar o navegador e, ao retornar, continuar o jogo exatamente de onde parou.
  * **Placar Persistente:** O placar de vit√≥rias e derrotas √© armazenado de forma duradoura.
  * **Timeline de Hist√≥rico:** Todas as a√ß√µes (in√≠cio de jogo, jogadas, resultados) s√£o registradas em um hist√≥rico visualmente agrad√°vel, formatado como uma timeline de "cards" com √≠cones e cores.

## üõ†Ô∏è Tecnologias Utilizadas

  * **Backend:** Python 3, Flask
  * **Banco de Dados:** ZODB (Zope Object Database)
  * **Frontend:** HTML5, CSS3 (sem frameworks, apenas estilos customizados)

## üìÇ Estrutura do Projeto

O c√≥digo √© modularizado para separar responsabilidades, seguindo as melhores pr√°ticas de desenvolvimento web.

  * `app.py`

      * O cora√ß√£o da aplica√ß√£o Flask. Define todas as rotas (URLs), gerencia as requisi√ß√µes HTTP e orquestra a intera√ß√£o entre a interface do usu√°rio e o banco de dados. Implementa o padr√£o de gerenciamento de conex√£o com o ZODB (uma conex√£o por requisi√ß√£o).

  * `model.py`

      * Define o modelo de dados da aplica√ß√£o. Cont√©m as classes `JogoDaForca` e `RegistroHistorico`, que herdam de `persistent.Persistent` para poderem ser salvas diretamente no ZODB. Esta camada √© completamente independente da interface (seja ela terminal ou web).

  * `static/`
    * Pasta que cont√©m todos os arquivos est√°ticos, que n√£o s√£o processados pelo back-end.
    * `css/estilo.css`: A folha de estilos (CSS) que define toda a apar√™ncia da aplica√ß√£o.

  * `templates/`

      * Diret√≥rio que cont√©m todos os arquivos HTML renderizados pelo Jinja2.
      * `layout.html`: O template base que define a estrutura comum (menu de navega√ß√£o, estilos CSS) para todas as p√°ginas.
      * `index.html`: A p√°gina principal onde o jogo acontece.
      * `novo_jogo.html`: A p√°gina de sele√ß√£o de categorias.
      * `historico.html`: A p√°gina que exibe a timeline de hist√≥rico.

  * `forca.fs` (gerado automaticamente)

      * O arquivo do banco de dados ZODB. Cont√©m todos os objetos Python persistidos.

## üöÄ Setup e Execu√ß√£o

### Pr√©-requisitos

  * Python 3.x
  * pip (gerenciador de pacotes do Python)

### Instala√ß√£o

1.  Clone este reposit√≥rio ou baixe os arquivos para um diret√≥rio local em uma pasta com permiss√£o de escrita (ex: `Documentos`, `Desktop`).

2.  Navegue at√© o diret√≥rio do projeto pelo seu terminal.

3.  (Recomendado) Crie e ative um ambiente virtual:

    ```bash
    # No Windows
    python -m venv venv
    .\venv\Scripts\activate

    # No macOS/Linux
    python3 -m venv venv
    source venv/bin/activate
    ```

4.  Instale as depend√™ncias:

    ```bash
    pip install Flask ZODB
    ```

### Executando a Aplica√ß√£o

1.  No terminal, a partir do diret√≥rio raiz do projeto, execute o script principal:
    ```bash
    python app.py
    ```
2.  Abra seu navegador de internet e acesse o seguinte endere√ßo:
    `http://127.0.0.1:5000`

## üí° Conceitos-Chave da Implementa√ß√£o

  * **Gerenciamento de Conex√£o no Flask:** Para evitar erros de `LockError` com o reiniciador autom√°tico do Flask, a aplica√ß√£o usa os decoradores `@app.before_request` e `@app.teardown_request`. Isso garante que uma nova conex√£o com o ZODB seja aberta no in√≠cio de cada requisi√ß√£o e fechada ao final, um padr√£o robusto para aplica√ß√µes web.

  * **Persist√™ncia Transparente:** A l√≥gica do jogo em `model.py` n√£o se preocupa em "como" salvar os dados. Ela simplesmente modifica os atributos dos objetos (ex: `self.letras_erradas.add(letra)`). O ZODB, junto com `transaction.commit()`, cuida de detectar essas mudan√ßas e persistir o estado do objeto no banco de dados.

  * **Estado entre Requisi√ß√µes:** Como o protocolo HTTP √© sem estado (stateless), o objeto do jogo em andamento (`g.root['jogo_em_andamento']`) √© recuperado do banco de dados no in√≠cio de cada requisi√ß√£o e salvo de volta ao final, permitindo a continuidade do jogo entre os cliques do usu√°rio.